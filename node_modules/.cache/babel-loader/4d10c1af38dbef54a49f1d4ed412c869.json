{"ast":null,"code":"var _jsxFileName = \"/Users/gordi/Desktop/Ironhack/proyectobarcenas/client/src/components/CreateOrder/CreateOrder.jsx\",\n    _s = $RefreshSig$();\n\nimport { useContext, useEffect, useState } from \"react\";\nimport { AuthContext } from \"../../context/auth.context\";\nimport restaurantService from \"../../services/restaurant.services\";\nimport { Fab } from \"@mui/material\";\nimport { Form, Button } from \"react-bootstrap\";\nimport productService from \"../../services/product.services\";\nimport { useParams } from \"react-router-dom\";\nimport io from \"socket.io-client\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst socket = io.connect(\"http://localhost:3001\");\n\nconst CreateOrder = props => {\n  _s();\n\n  const [products, setProducts] = useState([]);\n  const [productNum, setProductNum] = useState([props.isUpdated]);\n  const [orderForm, setOrderForm] = useState({});\n  const [userName, setUsername] = useState(\"Popino\");\n\n  const joinRoom = () => {\n    //if (userName !== \"\" && room !== \"\") {\n    console.log(\"click\");\n    socket.emit(\"join_room\", orderForm);\n  };\n\n  useEffect(() => {\n    loadMenu();\n  }, []);\n  const {\n    _id,\n    tableId\n  } = useParams();\n\n  const loadMenu = () => {\n    restaurantService.getRestaurant({\n      _id\n    }).then(response => setProducts(response.data.menu)).catch(err => console.log(err));\n  };\n\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setOrderForm({ ...orderForm,\n      [name]: value,\n      id: tableId //TABLE ID\n\n    });\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    joinRoom();\n    productService.createOrder(orderForm).then(() => console.log(\"producto creado con exito\")).catch(e => console.log(e));\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Form, {\n      onSubmit: handleSubmit,\n      children: [\"Lista de productos\", products.map(product => {\n        return /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: product.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 15\n          }, this), \" \", product.price, /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            name: product.name,\n            onChange: handleInputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"hidden\",\n            name: \"id\",\n            value: \"621f984c745ab17740b49361\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 15\n          }, this)]\n        }, product._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 13\n        }, this);\n      }), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"submit\",\n        children: \"Enviar orden\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s(CreateOrder, \"ZJ1voDyGdaL4lHK4elN0cZu8SfE=\", false, function () {\n  return [useParams];\n});\n\n_c = CreateOrder;\nexport default CreateOrder;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateOrder\");","map":{"version":3,"sources":["/Users/gordi/Desktop/Ironhack/proyectobarcenas/client/src/components/CreateOrder/CreateOrder.jsx"],"names":["useContext","useEffect","useState","AuthContext","restaurantService","Fab","Form","Button","productService","useParams","io","socket","connect","CreateOrder","props","products","setProducts","productNum","setProductNum","isUpdated","orderForm","setOrderForm","userName","setUsername","joinRoom","console","log","emit","loadMenu","_id","tableId","getRestaurant","then","response","data","menu","catch","err","handleInputChange","e","name","value","target","id","handleSubmit","preventDefault","createOrder","map","product","price"],"mappings":"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","sourcesContent":["import { useContext, useEffect, useState } from \"react\";\nimport { AuthContext } from \"../../context/auth.context\";\nimport restaurantService from \"../../services/restaurant.services\";\nimport { Fab } from \"@mui/material\";\nimport { Form, Button } from \"react-bootstrap\";\nimport productService from \"../../services/product.services\";\nimport { useParams } from \"react-router-dom\";\n\nimport io from \"socket.io-client\";\n\nconst socket = io.connect(\"http://localhost:3001\");\n\nconst CreateOrder = (props) => {\n  const [products, setProducts] = useState([]);\n  const [productNum, setProductNum] = useState([props.isUpdated]);\n  const [orderForm, setOrderForm] = useState({});\n\n  const [userName, setUsername] = useState(\"Popino\");\n\n  const joinRoom = () => {\n    //if (userName !== \"\" && room !== \"\") {\n      console.log(\"click\");\n      socket.emit(\"join_room\", orderForm);\n    \n  };\n\n\n\n\n  useEffect(() => {\n    loadMenu();\n  }, []);\n  const { _id, tableId } = useParams();\n  const loadMenu = () => {\n    restaurantService\n      .getRestaurant({ _id })\n      .then((response) => setProducts(response.data.menu))\n      .catch((err) => console.log(err));\n  };\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n\n    setOrderForm({\n      ...orderForm,\n      [name]: value,\n      id: tableId, //TABLE ID\n    });\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    joinRoom();\n\n    productService\n      .createOrder(orderForm)\n      .then(() => console.log(\"producto creado con exito\"))\n      .catch((e) => console.log(e));\n  };\n\n  return (\n    <>\n      <Form onSubmit={handleSubmit}>\n        Lista de productos\n        {products.map((product) => {\n          return (\n            <li key={product._id}>\n              <p>{product.name}</p> {product.price}\n              <input\n                type=\"number\"\n                name={product.name}\n                onChange={handleInputChange}\n              ></input>\n              <input\n                type=\"hidden\"\n                name=\"id\"\n                value=\"621f984c745ab17740b49361\"\n              ></input>\n            </li>\n          );\n        })}\n        <Button type=\"submit\">Enviar orden</Button>\n      </Form>\n    </>\n  );\n};\n\nexport default CreateOrder;\n"]},"metadata":{},"sourceType":"module"}