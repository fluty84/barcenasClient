{"ast":null,"code":"var _jsxFileName = \"/Users/gordi/Desktop/Ironhack/barcenas/client/src/components/createMenu/CreateMenu.jsx\",\n    _s = $RefreshSig$();\n\nimport { InputLabel, Container, TextField, Button, Select, MenuItem } from '@mui/material';\nimport { useContext, useState } from 'react';\nimport { Form } from 'react-bootstrap';\nimport { AuthContext } from '../../context/auth.context';\nimport { useNavigate } from 'react-router-dom';\nimport productService from '../../services/product.services';\nimport uploadService from '../../services/upload.service';\nimport MenuList from '../menuList/MenuList';\nimport FormMenu from '../formMenu/FormMenu';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport('./CreateMenu.css');\n\nconst CreateMenu = () => {\n  _s();\n\n  const {\n    isLoggedIn\n  } = useContext(AuthContext);\n  const {\n    user\n  } = useContext(AuthContext);\n  console.log('user is logged', isLoggedIn, user._id);\n  const [productData, setproductData] = useState({\n    name: '',\n    price: '',\n    category: '',\n    allergens: '',\n    restaurantId: user._id,\n    imageUrl: ''\n  });\n  const [loadingImage, setLoadingImage] = useState(false);\n  const [newProduct, setNewProduct] = useState(false);\n  const {\n    name,\n    price,\n    category,\n    allergens,\n    restaurantId,\n    imageUrl\n  } = productData;\n  const navigate = useNavigate();\n\n  const handleInputChange = e => {\n    const {\n      value,\n      name\n    } = e.target;\n    console.log(name);\n    console.log(value);\n    setproductData({ ...productData,\n      [name]: value\n    });\n  };\n\n  const toggleNew = () => !newProduct ? setNewProduct(true) : setNewProduct(false);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    console.log(productData);\n    productService.saveProduct(productData).then(_ref => {\n      let {\n        data\n      } = _ref;\n      console.log(data);\n      toggleNew();\n    }).catch(err => console.log(err));\n  };\n\n  const uploadProductImage = e => {\n    setLoadingImage(true);\n    const uploadData = new FormData();\n    uploadData.append('imageData', e.target.files[0]);\n    uploadService.uploadImage(uploadData).then(_ref2 => {\n      let {\n        data\n      } = _ref2;\n      setLoadingImage(false);\n      setproductData({ ...productData,\n        imageUrl: data.cloudinary_url\n      });\n    }).catch(err => console.log(err));\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"sm\",\n    children: /*#__PURE__*/_jsxDEV(FormMenu, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 9\n  }, this);\n};\n\n_s(CreateMenu, \"4PMAPQnRjdxm18w6zTLf/b3beCg=\", false, function () {\n  return [useNavigate];\n});\n\n_c = CreateMenu;\nexport default CreateMenu;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateMenu\");","map":{"version":3,"sources":["/Users/gordi/Desktop/Ironhack/barcenas/client/src/components/createMenu/CreateMenu.jsx"],"names":["InputLabel","Container","TextField","Button","Select","MenuItem","useContext","useState","Form","AuthContext","useNavigate","productService","uploadService","MenuList","FormMenu","CreateMenu","isLoggedIn","user","console","log","_id","productData","setproductData","name","price","category","allergens","restaurantId","imageUrl","loadingImage","setLoadingImage","newProduct","setNewProduct","navigate","handleInputChange","e","value","target","toggleNew","handleSubmit","preventDefault","saveProduct","then","data","catch","err","uploadProductImage","uploadData","FormData","append","files","uploadImage","cloudinary_url"],"mappings":"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","sourcesContent":["import { InputLabel, Container, TextField, Button, Select, MenuItem } from '@mui/material'\nimport { useContext, useState } from 'react'\nimport { Form } from 'react-bootstrap'\nimport { AuthContext } from '../../context/auth.context'\nimport { useNavigate } from 'react-router-dom'\nimport productService from '../../services/product.services'\nimport uploadService from '../../services/upload.service'\nimport MenuList from '../menuList/MenuList'\nimport FormMenu from '../formMenu/FormMenu'\n\nimport('./CreateMenu.css')\n\n\nconst CreateMenu = () => {\n\n    const { isLoggedIn } = useContext(AuthContext)\n\n    const { user } = useContext(AuthContext)\n\n    console.log('user is logged', isLoggedIn, user._id)\n\n\n    const [productData, setproductData] = useState(\n        {\n            name: '',\n            price: '',\n            category: '',\n            allergens: '',\n            restaurantId: user._id,\n            imageUrl: ''\n        }\n    )\n\n    const [loadingImage, setLoadingImage] = useState(false)\n\n    const [newProduct, setNewProduct] = useState(false)\n\n    const { name, price, category, allergens, restaurantId, imageUrl } = productData\n\n    const navigate = useNavigate()\n\n    const handleInputChange = e => {\n\n        const { value, name } = e.target\n\n        console.log(name)\n        console.log(value)\n\n        setproductData({\n            ...productData,\n            [name]: value\n        })\n    }\n\n    const toggleNew = () => !newProduct ? setNewProduct(true) : setNewProduct(false)\n\n    const handleSubmit = e => {\n        e.preventDefault()\n\n        console.log(productData)\n\n        productService\n            .saveProduct(productData)\n            .then(({ data }) => {\n                console.log(data)\n                toggleNew()\n            })\n            .catch(err => console.log(err))\n    }\n\n    const uploadProductImage = e => {\n\n        setLoadingImage(true)\n\n        const uploadData = new FormData()\n        uploadData.append('imageData', e.target.files[0])\n\n        uploadService\n            .uploadImage(uploadData)\n            .then(({ data }) => {\n                setLoadingImage(false)\n                setproductData({ ...productData, imageUrl: data.cloudinary_url })\n            })\n            .catch(err => console.log(err))\n    }\n\n\n    return (\n\n\n\n        <Container maxWidth='sm'>\n            <FormMenu></FormMenu>\n\n            {/* <Form onSubmit={handleSubmit} >\n\n                <TextField className='textField'\n                    required\n                    className=\"outlined-required\"\n                    label=\"Nombre del producto\"\n                    name=\"name\"\n                    type=\"text\"\n                    value={name}\n                    onChange={handleInputChange}\n                />\n                <TextField className='textField'\n                    required\n                    className=\"outlined-required\"\n                    label=\"Precio\"\n                    name=\"price\"\n                    type=\"number\"\n                    value={price}\n                    onChange={handleInputChange}\n                />\n\n\n                <TextField className='uploadFile'\n\n                    className=\"outlined-required\"\n                    label=\"Imagen\"\n                    name=\"restaurantId\"\n                    type=\"file\"\n\n                    onChange={uploadProductImage}\n                />\n\n                <InputLabel id=\"categorySelect\">Categoria</InputLabel>\n                <Select\n                    size='small'\n                    labelId=\"categorySelect\"\n                    id=\"categorySelect\"\n                    name='category'\n                    value={category}\n                    label=\"category\"\n                    onChange={handleInputChange}\n                >\n                    <MenuItem value={'comida'}>Comida</MenuItem>\n                    <MenuItem value={'bebida'}>Bebida</MenuItem>\n                </Select>\n\n                <InputLabel id=\"categorySelect\">Alérgenos</InputLabel>\n\n                <Select\n                    size='small'\n                    labelId=\"allegensSelect\"\n                    id=\"allegensSelect\"\n                    name='allergens'\n                    value={allergens}\n                    label=\"allergens\"\n                    onChange={handleInputChange}\n                >\n                    <MenuItem value={'frutos secos'}>Frutos Secos</MenuItem>\n                    <MenuItem value={'pescado'}>Pescado</MenuItem>\n                    <MenuItem value={'cruzcampo'}>Cruz-Campo</MenuItem>\n\n                </Select>\n\n\n                <Button variant=\"outlined\" size=\"small\" type='submit' disabled={loadingImage}  >{loadingImage ? 'Espere...' : 'Añadir producto'}\n\n                </Button>\n            </Form> */}\n        </Container>\n    )\n\n}\n\nexport default CreateMenu\n\n"]},"metadata":{},"sourceType":"module"}