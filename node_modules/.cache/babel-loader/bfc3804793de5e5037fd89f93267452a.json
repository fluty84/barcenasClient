{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\gonza\\\\Desktop\\\\ironhack\\\\9week\\\\barcenasClient\\\\src\\\\components\\\\formMenu\\\\FormMenu.jsx\",\n    _s = $RefreshSig$();\n\nimport { InputLabel, Container, TextField, Button, Select, MenuItem } from '@mui/material';\nimport { useContext, useState } from 'react';\nimport { Form } from 'react-bootstrap';\nimport { AuthContext } from '../../context/auth.context';\nimport productService from '../../services/product.services';\nimport uploadService from '../../services/upload.service';\nimport MenuList from '../menuList/MenuList';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport('./FormMenu.css');\n\nconst FormMenu = () => {\n  _s();\n\n  const {\n    isLoggedIn\n  } = useContext(AuthContext);\n  const {\n    user\n  } = useContext(AuthContext);\n  console.log('user is logged', isLoggedIn, user._id);\n  const [productData, setproductData] = useState({\n    name: '',\n    price: '',\n    category: '',\n    allergens: '',\n    restaurantId: user._id,\n    imageUrl: ''\n  });\n  const [loadingImage, setLoadingImage] = useState(false);\n  const [newProduct, setNewProduct] = useState(false);\n  const {\n    name,\n    price,\n    category,\n    allergens,\n    restaurantId,\n    imageUrl\n  } = productData;\n\n  const handleInputChange = e => {\n    const {\n      value,\n      name\n    } = e.target;\n    console.log(name);\n    console.log(value);\n    setproductData({ ...productData,\n      [name]: value\n    });\n  };\n\n  const toggleNew = () => !newProduct ? setNewProduct(true) : setNewProduct(false);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    productService.saveProduct(productData).then(_ref => {\n      let {\n        data\n      } = _ref;\n      console.log(data);\n      toggleNew();\n    }).catch(err => console.log(err));\n  };\n\n  const uploadProductImage = e => {\n    setLoadingImage(true);\n    const uploadData = new FormData();\n    uploadData.append('imageData', e.target.files[0]);\n    uploadService.uploadImage(uploadData).then(_ref2 => {\n      let {\n        data\n      } = _ref2;\n      setLoadingImage(false);\n      setproductData({ ...productData,\n        imageUrl: data.cloudinary_url\n      });\n    }).catch(err => console.log(err));\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(MenuList, {\n      newProduct: newProduct\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n      children: \"Nuevo producto \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Form, {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(TextField, {\n        className: \"textField\",\n        required: true //className=\"outlined-required\"\n        ,\n        label: \"Nombre del producto\",\n        name: \"name\",\n        type: \"text\",\n        value: name,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        className: \"textField\",\n        required: true //className=\"outlined-required\"\n        ,\n        label: \"Precio\",\n        name: \"price\",\n        type: \"number\",\n        value: price,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        className: \"uploadFile\" //className=\"outlined-required\"\n        ,\n        label: \"Imagen\",\n        name: \"restaurantId\",\n        type: \"file\",\n        onChange: uploadProductImage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(InputLabel, {\n        id: \"categorySelect\",\n        children: \"Categoria\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Select, {\n        size: \"small\",\n        labelId: \"categorySelect\",\n        id: \"categorySelect\",\n        name: \"category\",\n        value: category,\n        label: \"category\",\n        onChange: handleInputChange,\n        children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n          value: 'comida',\n          children: \"Comida\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n          value: 'bebida',\n          children: \"Bebida\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(InputLabel, {\n        id: \"categorySelect\",\n        children: \"Al\\xE9rgenos\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Select, {\n        size: \"small\",\n        labelId: \"allegensSelect\",\n        id: \"allegensSelect\",\n        name: \"allergens\",\n        value: allergens,\n        label: \"allergens\",\n        onChange: handleInputChange,\n        children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n          value: 'frutos secos',\n          children: \"Frutos Secos\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n          value: 'pescado',\n          children: \"Pescado\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n          value: 'cruzcampo',\n          children: \"Cruz-Campo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outlined\",\n        size: \"small\",\n        type: \"submit\",\n        disabled: loadingImage,\n        children: loadingImage ? 'Cargando imagen' : 'Añadir producto'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s(FormMenu, \"mLcGwGGzBGTYsfGLckK+QhrNIt0=\");\n\n_c = FormMenu;\nexport default FormMenu;\n\nvar _c;\n\n$RefreshReg$(_c, \"FormMenu\");","map":{"version":3,"sources":["C:/Users/gonza/Desktop/ironhack/9week/barcenasClient/src/components/formMenu/FormMenu.jsx"],"names":["InputLabel","Container","TextField","Button","Select","MenuItem","useContext","useState","Form","AuthContext","productService","uploadService","MenuList","FormMenu","isLoggedIn","user","console","log","_id","productData","setproductData","name","price","category","allergens","restaurantId","imageUrl","loadingImage","setLoadingImage","newProduct","setNewProduct","handleInputChange","e","value","target","toggleNew","handleSubmit","preventDefault","saveProduct","then","data","catch","err","uploadProductImage","uploadData","FormData","append","files","uploadImage","cloudinary_url"],"mappings":"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","sourcesContent":["import { InputLabel, Container, TextField, Button, Select, MenuItem } from '@mui/material'\r\nimport { useContext, useState } from 'react'\r\nimport { Form } from 'react-bootstrap'\r\nimport { AuthContext } from '../../context/auth.context'\r\nimport productService from '../../services/product.services'\r\nimport uploadService from '../../services/upload.service'\r\nimport MenuList from '../menuList/MenuList'\r\nimport('./FormMenu.css')\r\n\r\nconst FormMenu = () => {\r\n\r\nconst { isLoggedIn } = useContext(AuthContext)\r\n\r\nconst { user } = useContext(AuthContext)\r\n\r\nconsole.log('user is logged', isLoggedIn, user._id)\r\n\r\n\r\nconst [productData, setproductData] = useState(\r\n    {\r\n        name: '',\r\n        price: '',\r\n        category: '',\r\n        allergens: '',\r\n        restaurantId: user._id,\r\n        imageUrl: ''\r\n    }\r\n)\r\n\r\nconst [loadingImage, setLoadingImage] = useState(false)\r\n\r\nconst [newProduct, setNewProduct] = useState(false)\r\n\r\nconst { name, price, category, allergens, restaurantId, imageUrl } = productData\r\n\r\nconst handleInputChange = e => {\r\n\r\n    const { value, name } = e.target\r\n\r\n    console.log(name)\r\n    console.log(value)\r\n\r\n    setproductData({\r\n        ...productData,\r\n        [name]: value\r\n    })\r\n}\r\n\r\nconst toggleNew = () => !newProduct ? setNewProduct(true) : setNewProduct(false)\r\n\r\nconst handleSubmit = e => {\r\n    e.preventDefault()\r\n\r\n    productService\r\n        .saveProduct(productData)\r\n        .then(({ data }) => {\r\n            console.log(data)\r\n            toggleNew()\r\n        })\r\n        .catch(err => console.log(err))\r\n}\r\n\r\nconst uploadProductImage = e => {\r\n\r\n    setLoadingImage(true)\r\n\r\n    const uploadData = new FormData()\r\n    uploadData.append('imageData', e.target.files[0])\r\n\r\n    uploadService\r\n        .uploadImage(uploadData)\r\n        .then(({ data }) => {\r\n            setLoadingImage(false)\r\n            setproductData({ ...productData, imageUrl: data.cloudinary_url })\r\n        })\r\n        .catch(err => console.log(err))\r\n}\r\n\r\n\r\n\r\n\r\n\r\n    return (\r\n\r\n        <>\r\n            <MenuList newProduct={newProduct}></MenuList>\r\n\r\n            <h4>Nuevo producto </h4>\r\n            <Form onSubmit={handleSubmit} >\r\n\r\n                <TextField className='textField'\r\n                    required\r\n                    //className=\"outlined-required\"\r\n                    label=\"Nombre del producto\"\r\n                    name=\"name\"\r\n                    type=\"text\"\r\n                    value={name}\r\n                    onChange={handleInputChange}\r\n                />\r\n                <TextField className='textField'\r\n                    required\r\n                    //className=\"outlined-required\"\r\n                    label=\"Precio\"\r\n                    name=\"price\"\r\n                    type=\"number\"\r\n                    value={price}\r\n                    onChange={handleInputChange}\r\n                />\r\n\r\n\r\n                <TextField className='uploadFile'\r\n\r\n                    //className=\"outlined-required\"\r\n                    label=\"Imagen\"\r\n                    name=\"restaurantId\"\r\n                    type=\"file\"\r\n\r\n                    onChange={uploadProductImage}\r\n                />\r\n\r\n                <InputLabel id=\"categorySelect\">Categoria</InputLabel>\r\n                <Select\r\n                    size='small'\r\n                    labelId=\"categorySelect\"\r\n                    id=\"categorySelect\"\r\n                    name='category'\r\n                    value={category}\r\n                    label=\"category\"\r\n                    onChange={handleInputChange}\r\n                >\r\n                    <MenuItem value={'comida'}>Comida</MenuItem>\r\n                    <MenuItem value={'bebida'}>Bebida</MenuItem>\r\n                </Select>\r\n\r\n                <InputLabel id=\"categorySelect\">Alérgenos</InputLabel>\r\n\r\n                <Select\r\n                    size='small'\r\n                    labelId=\"allegensSelect\"\r\n                    id=\"allegensSelect\"\r\n                    name='allergens'\r\n                    value={allergens}\r\n                    label=\"allergens\"\r\n                    onChange={handleInputChange}\r\n                >\r\n                    <MenuItem value={'frutos secos'}>Frutos Secos</MenuItem>\r\n                    <MenuItem value={'pescado'}>Pescado</MenuItem>\r\n                    <MenuItem value={'cruzcampo'}>Cruz-Campo</MenuItem>\r\n\r\n                </Select>\r\n\r\n\r\n                <Button variant=\"outlined\" size=\"small\" type='submit' disabled={loadingImage}  >{loadingImage ? 'Cargando imagen' : 'Añadir producto'}\r\n\r\n                </Button>\r\n            </Form>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default FormMenu"]},"metadata":{},"sourceType":"module"}