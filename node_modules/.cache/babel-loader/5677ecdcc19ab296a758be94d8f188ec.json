{"ast":null,"code":"var _jsxFileName = \"/Users/gordi/Desktop/Ironhack/proyectobarcenas/client/src/components/CreateOrder/CreateOrder.jsx\",\n    _s = $RefreshSig$();\n\nimport { useContext, useEffect, useState, useRef } from \"react\";\nimport { AuthContext } from \"../../context/auth.context\";\nimport restaurantService from \"../../services/restaurant.services\";\nimport { Fab } from \"@mui/material\";\nimport { Form, Button } from \"react-bootstrap\";\nimport productService from \"../../services/product.services\";\nimport { useParams } from \"react-router-dom\";\nimport io from \"socket.io-client\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst socket = io.connect(\"http://localhost:3001\");\n\nconst CreateOrder = props => {\n  _s();\n\n  console.log(props, 'prosp, wherw');\n  const [products, setProducts] = useState([]);\n  const [productNum, setProductNum] = useState([props.isUpdated]);\n  const [orderForm, setOrderForm] = useState({});\n  const [userName, setUsername] = useState(\"Popino\");\n  const formRef = useRef(); // const joinRoom = () => {\n  //   socket.emit(\"join_room\", orderForm);\n  // };\n\n  useEffect(() => {\n    loadMenu();\n    products.map(product => {\n      const {\n        name\n      } = product;\n      setOrderForm({ ...orderForm,\n        [name]: 0\n      });\n    });\n  }, []);\n  const {\n    _id,\n    tableId\n  } = useParams();\n\n  const loadMenu = () => {\n    restaurantService.getRestaurant({\n      _id\n    }).then(response => setProducts(response.data.menu)).catch(err => console.log(err));\n  };\n\n  const handleInputChange = arg => {\n    if (arg.target.value < 0 || arg.target.value > 50) {\n      arg.target.value = 0;\n    }\n\n    const {\n      name,\n      value\n    } = arg.target;\n    setOrderForm({ ...orderForm,\n      [name]: value,\n      id: tableId //TABLE ID\n\n    });\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    props.orderSent();\n    props.receiveOrder(orderForm);\n    formRef.current.querySelector(form).reset();\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Form, {\n      onSubmit: handleSubmit,\n      ref: formRef,\n      children: [\"Lista de productos Pide\", products.map(product => {\n        return /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: product.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 15\n          }, this), \" \", product.price, /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            name: product.name,\n            value: orderForm[product.name],\n            onChange: handleInputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"hidden\",\n            name: \"id\",\n            value: \"621f984c745ab17740b49361\" //\n\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 15\n          }, this)]\n        }, product._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 13\n        }, this);\n      }), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"submit\",\n        children: \"Enviar orden\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s(CreateOrder, \"cSOp2EjfVSZQ/cQS1NcUUlE2Ygs=\", false, function () {\n  return [useParams];\n});\n\n_c = CreateOrder;\nexport default CreateOrder;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateOrder\");","map":{"version":3,"sources":["/Users/gordi/Desktop/Ironhack/proyectobarcenas/client/src/components/CreateOrder/CreateOrder.jsx"],"names":["useContext","useEffect","useState","useRef","AuthContext","restaurantService","Fab","Form","Button","productService","useParams","io","socket","connect","CreateOrder","props","console","log","products","setProducts","productNum","setProductNum","isUpdated","orderForm","setOrderForm","userName","setUsername","formRef","loadMenu","map","product","name","_id","tableId","getRestaurant","then","response","data","menu","catch","err","handleInputChange","arg","target","value","id","handleSubmit","e","preventDefault","orderSent","receiveOrder","current","querySelector","form","reset","price"],"mappings":"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","sourcesContent":["import { useContext, useEffect, useState, useRef } from \"react\";\nimport { AuthContext } from \"../../context/auth.context\";\nimport restaurantService from \"../../services/restaurant.services\";\nimport { Fab } from \"@mui/material\";\nimport { Form, Button } from \"react-bootstrap\";\nimport productService from \"../../services/product.services\";\nimport { useParams } from \"react-router-dom\";\n\nimport io from \"socket.io-client\";\n\nconst socket = io.connect(\"http://localhost:3001\");\n\nconst CreateOrder = (props) => {\n  console.log(props, 'prosp, wherw')\n  const [products, setProducts] = useState([]);\n  const [productNum, setProductNum] = useState([props.isUpdated]);\n  const [orderForm, setOrderForm] = useState({\n  });\n  const [userName, setUsername] = useState(\"Popino\");\n\n  const formRef = useRef();\n\n  // const joinRoom = () => {\n  //   socket.emit(\"join_room\", orderForm);\n  // };\n\n  useEffect(() => {\n    loadMenu();\n\n    products.map((product) => {\n      const { name } = product\n      setOrderForm({\n        ...orderForm,\n        [name]: 0\n      })\n    })\n\n  }, []);\n\n  const { _id, tableId } = useParams();\n\n  const loadMenu = () => {\n    restaurantService\n      .getRestaurant({ _id })\n      .then((response) => setProducts(response.data.menu))\n      .catch((err) => console.log(err));\n  };\n\n  const handleInputChange = (arg) => {\n    if (arg.target.value < 0 || arg.target.value > 50) {\n      arg.target.value = 0;\n    }\n    const { name, value } = arg.target;\n\n    setOrderForm({\n      ...orderForm,\n      [name]: value,\n      id: tableId, //TABLE ID\n    });\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    props.orderSent();\n    props.receiveOrder(orderForm);\n\n    formRef.current.querySelector(form).reset();\n  };\n\n  return (\n    <>\n      <Form onSubmit={handleSubmit} ref={formRef}>\n        Lista de productos Pide\n        {products.map((product) => {\n          return (\n            <li key={product._id}>\n              <p>{product.name}</p> {product.price}\n              <input\n                type=\"number\"\n                name={product.name}\n                value={orderForm[product.name]}\n                onChange={handleInputChange}\n              ></input>\n              <input\n                type=\"hidden\"\n                name=\"id\"\n                value=\"621f984c745ab17740b49361\" //\n              ></input>\n            </li>\n          );\n        })}\n        <Button type=\"submit\">Enviar orden</Button>\n      </Form>\n    </>\n  );\n};\n\nexport default CreateOrder;\n"]},"metadata":{},"sourceType":"module"}