{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\gonza\\\\Desktop\\\\ironhack\\\\9week\\\\barcenasClient\\\\src\\\\components\\\\CreateOrder\\\\CreateOrder.jsx\",\n    _s = $RefreshSig$();\n\nimport { useContext, useEffect, useState } from \"react\";\nimport { AuthContext } from \"../../context/auth.context\";\nimport restaurantService from \"../../services/restaurant.services\";\nimport { Fab } from \"@mui/material\";\nimport { Form, Button } from \"react-bootstrap\";\nimport productService from \"../../services/product.services\";\nimport { useParams } from \"react-router-dom\";\nimport io from \"socket.io-client\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst socket = io.connect(\"http://localhost:3001\");\n\nconst CreateOrder = props => {\n  _s();\n\n  const [products, setProducts] = useState([]);\n  const [productNum, setProductNum] = useState([props.isUpdated]);\n  const [orderForm, setOrderForm] = useState({});\n  const [userName, setUsername] = useState(\"Popino\");\n  useEffect(() => {\n    loadMenu();\n    products.map(product => {\n      const {\n        name\n      } = product;\n      setOrderForm({ ...orderForm,\n        [name]: 0\n      });\n    });\n  }, []);\n  const {\n    _id,\n    tableId\n  } = useParams();\n\n  const loadMenu = () => {\n    restaurantService.getRestaurant({\n      _id\n    }).then(response => setProducts(response.data.menu)).catch(err => console.log(err));\n  };\n\n  const handleInputChange = arg => {\n    if (arg.target.value < 0 || arg.target.value > 50) {\n      arg.target.value = 0;\n    }\n\n    const {\n      name,\n      value\n    } = arg.target;\n    setOrderForm({ ...orderForm,\n      [name]: value,\n      id: tableId //TABLE ID\n\n    });\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    props.orderSent();\n    props.receiveOrder(orderForm);\n    setOrderForm(prevState => {\n      Object.keys(prevState).forEach(el => prevState = { ...prevState,\n        [el]: 0\n      });\n      return prevState;\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Form, {\n      onSubmit: handleSubmit,\n      children: [\"Lista de productos Pide\", products.map(product => {\n        return /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: product.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 15\n          }, this), \" \", product.price, /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            name: product.name,\n            value: orderForm[product.name],\n            onChange: handleInputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"hidden\",\n            name: \"id\",\n            value: \"621f984c745ab17740b49361\" //\n\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 15\n          }, this)]\n        }, product._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this);\n      }), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"submit\",\n        children: \"Enviar orden\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s(CreateOrder, \"/doYYg24r2qwadHI6eSq+SJ71nA=\", false, function () {\n  return [useParams];\n});\n\n_c = CreateOrder;\nexport default CreateOrder;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateOrder\");","map":{"version":3,"sources":["C:/Users/gonza/Desktop/ironhack/9week/barcenasClient/src/components/CreateOrder/CreateOrder.jsx"],"names":["useContext","useEffect","useState","AuthContext","restaurantService","Fab","Form","Button","productService","useParams","io","socket","connect","CreateOrder","props","products","setProducts","productNum","setProductNum","isUpdated","orderForm","setOrderForm","userName","setUsername","loadMenu","map","product","name","_id","tableId","getRestaurant","then","response","data","menu","catch","err","console","log","handleInputChange","arg","target","value","id","handleSubmit","e","preventDefault","orderSent","receiveOrder","prevState","Object","keys","forEach","el","price"],"mappings":"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","sourcesContent":["import { useContext, useEffect, useState } from \"react\";\r\nimport { AuthContext } from \"../../context/auth.context\";\r\nimport restaurantService from \"../../services/restaurant.services\";\r\nimport { Fab } from \"@mui/material\";\r\nimport { Form, Button } from \"react-bootstrap\";\r\nimport productService from \"../../services/product.services\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nimport io from \"socket.io-client\";\r\n\r\nconst socket = io.connect(\"http://localhost:3001\");\r\n\r\nconst CreateOrder = (props) => {\r\n \r\n  const [products, setProducts] = useState([]);\r\n  const [productNum, setProductNum] = useState([props.isUpdated]);\r\n  const [orderForm, setOrderForm] = useState({\r\n  });\r\n  const [userName, setUsername] = useState(\"Popino\");\r\n\r\n  useEffect(() => {\r\n    loadMenu();\r\n\r\n    products.map((product) => {\r\n      const { name } = product\r\n      setOrderForm({\r\n        ...orderForm,\r\n        [name]: 0\r\n      })\r\n    })\r\n\r\n  }, []);\r\n\r\n  const { _id, tableId } = useParams();\r\n\r\n  const loadMenu = () => {\r\n    restaurantService\r\n      .getRestaurant({ _id })\r\n      .then((response) => setProducts(response.data.menu))\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  const handleInputChange = (arg) => {\r\n    if (arg.target.value < 0 || arg.target.value > 50) {\r\n      arg.target.value = 0;\r\n    }\r\n    const { name, value } = arg.target;\r\n\r\n    setOrderForm({\r\n      ...orderForm,\r\n      [name]: value,\r\n      id: tableId, //TABLE ID\r\n    });\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    props.orderSent();\r\n    props.receiveOrder(orderForm);\r\n    setOrderForm(prevState => {\r\n      Object.keys(prevState).forEach(el => (prevState = { ...prevState, [el]: 0 }))\r\n      return prevState;\r\n    })\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Form onSubmit={handleSubmit}>\r\n        Lista de productos Pide\r\n        {products.map((product) => {\r\n          return (\r\n            <li key={product._id}>\r\n              <p>{product.name}</p> {product.price}\r\n              <input\r\n                type=\"number\"\r\n                name={product.name}\r\n                value={orderForm[product.name]}\r\n                onChange={handleInputChange}\r\n              ></input>\r\n              <input\r\n                type=\"hidden\"\r\n                name=\"id\"\r\n                value=\"621f984c745ab17740b49361\" //\r\n              ></input>\r\n            </li>\r\n          );\r\n        })}\r\n        <Button type=\"submit\">Enviar orden</Button>\r\n      </Form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CreateOrder;\r\n"]},"metadata":{},"sourceType":"module"}